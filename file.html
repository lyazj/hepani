<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Upload</title>
    <style>
      fieldset { display: inline-block; max-width: 800px; box-sizing: border-box; }
      fieldset label { line-height: 26px; }
      fieldset #timetext { width: 475px; }
      fieldset #eventtext { width: 50px; }
    </style>
  </head>
  <body>
    <h1>Upload a file</h1>
    <p>To generate animation, we need a file in which one or more hign energy physics events are stored.</p>
    <p>By now, three types of file are supported:</p>
    <ul>
      <li>
        running log from <em>pythia8</em> (
        <strong>plain text format</strong>, usually <strong>.txt</strong> or <strong>.log</strong>
        )
      </li>
      <li>
        HepMC2, storing HEP event(s) generated by <em>pythia8</em> (
        usually <strong>.hepmc</strong>
        )
      </li>
      <li>
        Hepani JSON file, downloaded by clicking <em>save</em> button at home page (
        usually <strong>animation.json</strong>
        )
      </li>
    </ul>
    <p>To go back home, <a href="javascript:shouldRequestJSON=false;writePage('/',()=>{initialize(1)})">click here</a>.</p>
    <p>
    What you see in index page is a VBS process generated by <em>pythia8</em>.
    While running <em>pythia8</em>,
    we redirected <tt>stdout</tt> (<em>pythia8</em> uses it to output running logs) to a writable path,
    thus a valid input for animation is generated.
    All events are stored in a HepMC2 file after <em>pythia8</em> exits normally, (if so, )
    which is also a valid input to be uploaded.
    </p>
    <p>Let's have a try!</p>

    <form id="upload" action="/" method="post" enctype="multipart/form-data">
      <fieldset>
        <legend>Upload a file</legend>
        <label for="type">Type:</label>
        <select name="type" id="type">
          <option value="py8log" selected="selected">running log from pythia8</option>
          <option value="hepmc2">HepMC2 file</option>
          <option value="hepani">Hepani JSON file</option>
        </select>
        &nbsp;&nbsp;
        <label for="input">File:</label>
        <input type="file" name="input" id="input" />
        &nbsp;&nbsp;
        <label for="gzip">Compressed:</label>
        <input type="checkbox" name="gzip" id="gzip" /><label for="gzip">gzip</label>
        <br />
        <label for="eventtext">Event:</label>
        <input type="text" name="eventtext" id="eventtext">
        &nbsp;&nbsp;
        <label for="timetext">Durations:</label>
        <input type="text" name="timetext" id="timetext" value="{0:0.001,1:5}" />
        <button onclick="return submitUpload()" id="submit">upload</button>
        <br />
      </fieldset>
    </form>

    <p>
    Note:
    Please check the box before <strong>gzip</strong> if the file already compressed with gzip.
    If no file selected, an example of selected type will be used.
    A nonnegtive index is expected in textbox after <strong>Event</strong>.
    A JavaScript Object literal is expected in textbox after <strong>Durations</strong>.
    </p>
    <p>
    For more information about <em>pythia8</em>, see: <a href="https://pythia.org/" target="_black">PYTHIA official site</a>.
    For help, see: <a href="coming.html" target="_black">help page</a>.
    </p>

    <script src="/js/load.js"></script>
    <script>
      loadJS("https://cdn.bootcdn.net/ajax/libs/pako/2.0.4/pako.min.js")
      loadJS("/js/io.js")
      loadJS("/js/file.js")
      loadJS("https://threejs.org/build/three.min.js", function () {
        loadJS("https://threejs.org/examples/js/controls/OrbitControls.js", function () {
          loadJS("/js/ani.js")
        })
      })
    </script>
  </body>
</html>
